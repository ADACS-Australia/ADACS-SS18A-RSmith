\input{inspiral-module.tex}
\clearpage

\section{Inspiral Search Programs}
\label{section:inspiral}

This section of \textsc{LALApps} contains programs that can be used to search
interferometer data for inspiral signals using templated matched filtering and
associated veto stratergies.

\clearpage
\subsection{Program \texttt{lalapps\_inspiral\_pipe}}
\label{program:inspiral-pipeline}
\idx[Program]{inspiral\_pipeline.py}

\begin{entry}
\item[Name]
\verb$lalapps_inspiral_pipe$ --- python script to generate Condor DAGs to
run the inspiral pipeline.

\item[Synopsis]
\begin{verbatim}
  -h, --help               display this message
  -v, --version            print version information and exit
  -u, --user-tag TAG       tag the job with TAG (overrides value in ini file)

  -d, --datafind           run LALdataFind to create frame cache files
  -t, --template-bank      run lalapps_tmpltbank to generate a template bank
  -i, --inspiral           run lalapps_inspiral on the first IFO
  -T, --triggered-bank     run lalapps_trigtotmplt to generate a triggered bank
  -I, --triggered-inspiral run lalapps_inspiral on the second IFO
  -C, --coincidence        run lalapps_inca on the triggers from both IFOs

  -j, --injections         add simulated inspirals from injection file

  -p, --playground-only    only create chunks that overlap with playground
  -P, --priority PRIO      run jobs with condor priority PRIO

  -f, --config-file FILE   use configuration file FILE
  -l, --log-path PATH      directory to write condor log file
\end{verbatim}

\item[Description] \verb$lalapps_inspiral_pipe$ generates a Condor DAG to run
the inspiral analysis pipeline. The configuration file should specify the
parameters needed to run the jobs and must be specified with the
\verb$--config-file$ option.  A file containing science segments to be
analyzed should be specified in the \verb$[input]$ section of the
configuration file with a line such as
\begin{verbatim}
segments = S2H1L1v03_selectedsegs.txt
\end{verbatim}
This should contain four whitespace separated coulumns:
\begin{verbatim}
  segment_id    gps_start_time  gps_end_time    duration
\end{verbatim}
that define the science segments to be used. Lines starting with an octothorpe
are ignored.

The analysis chunk size is determined from the number of data segments and
thier length and overlap specified in config file. A chunk length is typically
this is 1024 seconds for S2.  The chunks start and stop times are computed
from the science segment times and used to build the DAG.

The once the DAG file has been created it should be submitted to the Condor
pool with the \verb$condor_submit_dag$ command.

\item[Options]\leavevmode
\begin{entry}
\item[\texttt{--help}] Display a brief usage summary.
\end{entry}

\item[Example]
Generate a DAG to run an inspiral search on the first IFO. The generated
DAG is then submitted with \texttt{condor\_submit\_dag}
\begin{verbatim}
lalapps_inspiral_pipe --log-path /people/duncan/dag_logs \
--datafind --template-bank --inspiral --playground-only \
--config-file l1_s2.ini

condor_submit_dag l1_s2.dag
\end{verbatim}

\item[Author] 
Duncan Brown
\end{entry}

\clearpage
\subsection{Program \texttt{lalapps\_tmpltbank}}
\label{program:lalapps-tmpltbank}
\idx[Program]{lalapps\_tmpltbank}

\begin{entry}
\item[Name]
\verb$lalapps_tmpltbank$ --- program to generate inspiral template banks.

\item[Synopsis]
\begin{verbatim}
  --help                       display this message
  --verbose                    print progress information
  --debug-level LEVEL          set the LAL debug level to LEVEL
  --user-tag STRING            set the process_params usertag to STRING
  --comment STRING             set the process table comment to STRING

  --gps-start-time SEC         GPS second of data start time
  --gps-end-time SEC           GPS second of data end time
  --pad-data T                 pad the data start and end time by T seconds

  --frame-cache                obtain frame data from LAL frame cache FILE
  --calibration-cache FILE     obtain calibration from LAL frame cache FILE
  --channel-name CHAN          read data from interferometer channel CHAN

  --sample-rate F              filter data at F Hz, downsampling if necessary
  --resample-filter TYPE       set resample filter to TYPE [ldas|butterworth]

  --disable-high-pass          turn off the IIR highpass filter
  --enable-high-pass F         high pass data above F Hz using an IIR filter
  --spectrum-type TYPE         use PSD estimator TYPE [mean|median]

  --segment-length N           set data segment length to N points
  --number-of-segments N       set number of data segments to N

  --low-frequency-cutoff F     do not filter below F Hz
  --high-frequency-cutoff F    upper frequency cutoff in Hz

  --minimum-mass MASS          set minimum component mass of bank to MASS
  --maximum-mass MASS          set maximum component mass of bank to MASS
  --minimal-match M            generate bank with minimal match M

  --order ORDER                set post-Newtonian order of the waveform to ORDER
                                 (newtonian|oneHalfPN|onePN|onePointFivePN|
                                 twoPN|twoPointFive|threePN|threePointFivePN)
  --approximant APPROX         set approximant of the waveform to APPROX
                                 (TaylorT1|TaylorT2|TaylorT3|TaylorF1|TaylorF2|
                                 PadeT1|PadeT2|EOB|BCV|SpinTaylorT3)
  --space SPACE                grid up template bank with mass parameters SPACE
                                 (Tau0Tau2|Tau0Tau3)

  --write-raw-data             write raw data to a frame file
  --write-response             write the computed response function to a frame
  --write-spectrum             write the uncalibrated psd to a frame
  --write-strain-spectrum      write the calibrated strain psd to a text file
\end{verbatim}

\item[Description] 
\verb$lalapps_tmpltbank$ is a stand alone code for generating inspiral
template banks for LIGO data with the LAL bank package.  The code generates a
calibrated power spectrum at the specified time for the requested channel and
uses this to compute the template bank.  See the LAL bank package
documentation for detailed information on the algorithms used to generate the
banks.

\item[Options]\leavevmode
\begin{entry}
\item[\texttt{--help}] Display a brief usage summary.
\end{entry}

\item[Example]
\begin{verbatim}
lalapps_tmpltbank \
--gps-start-time 734357353 --gps-end-time 734358377 \
--frame-cache cache/L-734357345-734361107.cache \
--segment-length 1048576 --number-of-segments 7 \
--pad-data 7 --sample-rate 4096 --resample-filter ldas \
--enable-high-pass 5.000000e+01 --spectrum-type median
--low-frequency-cutoff 7.000000e+01 --high-frequency-cutoff 2.048000e+03 \
--minimum-mass 1.000000e+00  --maximum-mass 3.000000e+00 \
--minimal-match 9.700000e-01 --calibration-cache  \
/ldas_outgoing/calibration/cache_files/L1-CAL-V03-729273600-734367600.cache \
--space Tau0Tau3 --approximant TaylorT1 --order twoPN \
--channel-name L1:LSC-AS_Q --debug-level 33
\end{verbatim}

\item[Author] 
Duncan Brown
\end{entry}
\clearpage

\subsection{Program \texttt{lalapps\_inspiral}}
\label{program:lalapps-inspiral}
\idx[Program]{lalapps\_inspiral}

\begin{entry}
\item[Name]
\verb$lalapps_inspiral$ --- stand alone inspiral search code

\item[Synopsis]
\begin{verbatim}
  --help                       display this message
  --verbose                    print progress information
  --debug-level LEVEL          set the LAL debug level to LEVEL
  --user-tag STRING            set the process_params usertag to STRING
  --comment STRING             set the process table comment to STRING

  --gps-start-time SEC         GPS second of data start time
  --gps-start-time-ns NS       GPS nanosecond of data start time
  --gps-end-time SEC           GPS second of data end time
  --gps-end-time-ns NS         GPS nanosecond of data end time
  --pad-data T                 pad the data start and end time by T seconds

  --frame-cache                obtain frame data from LAL frame cache FILE
  --calibration-cache FILE     obtain calibration from LAL frame cache FILE
  --channel-name CHAN          read data from interferometer channel CHAN

  --injection-file FILE        inject simulated inspiral signals from FILE

  --bank-file FILE             read template bank parameters from FILE
  --minimal-match M            override bank minimal match with M (sets delta)
  --start-template N           start filtering at template number N in bank
  --stop-templateN             stop filtering at template number N in bank

  --sample-rate F              filter data at F Hz, downsampling if necessary
  --resample-filter TYPE       set resample filter to TYPE (ldas|butterworth)

  --disable-high-pass          turn off the IIR highpass filter
  --enable-high-pass F         high pass data above F Hz using an IIR filter
  --spectrum-type TYPE         use PSD estimator TYPE (mean|median)

  --segment-length N           set data segment length to N points
  --number-of-segments N       set number of data segments to N
  --segment-overlap N          overlap data segments by N points

  --low-frequency-cutoff F     do not filter below F Hz
  --inverse-spec-length T      set length of inverse spectrum to T seconds
  --dynamic-range-exponent X   set dynamic range scaling to 2^X

  --chisq-bins P               set number of chisq veto bins to P
  --snr-threshold RHO          set signal-to-noise threshold to RHO
  --chisq-threshold X          threshold on chi^2 < X * ( p + rho^2 * delta^2 )
  --enable-event-cluster       turn on maximization over chirp length
  --disable-event-cluster      turn off maximization over chirp length

  --enable-output              write the results to a LIGO LW XML file
  --disable-output             do not write LIGO LW XML output file

  --write-raw-data             write raw data to a frame file
  --write-filter-data          write data that is passed to filter to a frame
  --write-response             write the computed response function to a frame
  --write-spectrum             write the uncalibrated psd to a frame
  --write-snrsq                write the snr time series for each data segment
  --write-chisq                write the r^2 time series for each data segment
\end{verbatim}

\item[Description] 
\verb$lalapps_inspiral$ is a stand alone code for performing matched filtering
of LIGO data for graviational wave signals and Monte Carlo analysis.

\item[Options]\leavevmode
\begin{entry}
\item[\texttt{--help}] Display a brief usage summary.
\end{entry}

\item[Example]
\begin{verbatim}
lalapps_inspiral \
--enable-output --inverse-spec-length 16  --segment-length 1048576 \
--low-frequency-cutoff 7.000000e+01 --pad-data 8 \
--bank-file L1-TMPLTBANK-734357353-1024.xml \
--sample-rate 4096 --chisq-threshold 20.0 --resample-filter ldas \
--channel-name L1:LSC-AS_Q --calibration-cache \
/ldas_outgoing/calibration/cache_files/L1-CAL-V03-729273600-734367600.cache \
--segment-overlap 524288  --snr-threshold 8.0 \
--frame-cache cache/L-734357345-734361107.cache \
--number-of-segments 7 --dynamic-range-exponent 6.900000e+01 \
--enable-high-pass 5.000000e+01 --debug-level 33 \
--gps-start-time 734357353 --gps-end-time 734358377 \
--chisq-bins 8 --spectrum-type median --enable-event-cluster \
--minimal-match 9.700000e-01
\end{verbatim}

\item[Author] 
Duncan Brown
\end{entry}
\clearpage

\subsection{Program \texttt{lalapps\_inca}}
\label{program:lalapps-inca}
\idx[Program]{lalapps\_inca}

\begin{entry}
\item[Name]
\verb$lalapps_inca$ --- program does inspiral coincidence analysis.

\item[Synopsis]
\verb$lalapps_inca$ 
[\verb$--help$]
[\verb$--verbose$]
[\verb$--comment$ \textsc{comment}]
[\verb$--debug-level$ \textsc{level}] \newline
%
[\verb$--no-playground$]
[\verb$--playground-only$]
\verb$--ifo-a$ \textsc{IFOA} 
\verb$--ifo-b$ \textsc{IFOB} \newline
%
[\verb$--epsilon$ \textsc{$\epsilon$}]
[\verb$--kappa$ \textsc{$\kappa$}]
[\verb$--dm$ \textsc{$\delta m$}]
[\verb$--dt$ \textsc{$\delta t$}] \newline
%
\verb$--gps-start-time$ \textsc{seconds} 
\verb$--gps-end-time$ \textsc{seconds} 
[\verb$--write-uniq-triggers$] \newline
%
\textsc{(LIGO Lightweight XML files)}

\item[Description] 
\verb$lalapps_inca$ performs coincidence on triggers from the inspiral
search code.  At present it works for only two interferometers. The names
of the two interferometers must be given. Output is written to a LIGO
lightweight XML files. Two XML output files are written.  The output files
contain \texttt{process}, \texttt{process\_params} and
\texttt{search\_summary} tables that describe the search. The primary ifo
output file contains the triggers from \textsc{IFOA} that are found to be in
coincidence with triggers in \textsc{IFOB}. The secondary output file contains
the triggers from \textsc{IFOB} that are found to be in coincidence with the
triggers from \textsc{IFOA}.  Each trigger in the \textsc{IFOA} file
corresponds to the coincident trigger in the \textsc{IFOB} file, so there may
be duplicate  \textsc{IFOA} triggers.  To prevent this, specify the
\verb$--write-uniq-triggers$ option.

The output files are named in the standard way for inspiral pipeline output.
The primary triggers are in a file named\\
\begin{center}
\texttt{IFOA-INCA\_USERTAG-GPSSTARTTIME-DURATION.xml}\\
\end{center}
and the secondary triggers are in a file named\\
\begin{center}
\texttt{IFOB-INCA\_USERTAG-GPSSTARTTIME-DURATION.xml}\\
\end{center}
If a \texttt{--user-tag} is not specified on the command line, the
\texttt{\_USERTAG} part of the filename will be omitted.

The default behavior outputs triggers during playground times only. To obtain
those triggers that are not in the playground, use the \verb$--no-playground$
flag.     

\texttt{lalapps\_inca} calls the LAL function
\texttt{LALCompareSnglInspiral()} to test if two triggers are coincident. This
first tests that the time of the triggers is coincidence to within $\delta t$.
It then tests that both the template masses are coincident to within $\delta m$.
It then tests to that
\begin{equation}
\frac{\left|D_\mathrm{IFOA} - D_\mathrm{IFOA}\right|}{D_\mathrm{IFOA}}
< \frac{\epsion}{\rho_\mathrm{IFOB}} + \kappa.
\end{equation}
This is equivalent to testing that
\begin{equation}
\left|\rho_\mathrm{IFOB} - \hat{\rho}_\mathrm{IFOB}\right| 
< \epsilon + \kappa\rho_\mathrm{IFOB}.
\end{equation}
If all three tests pass, the events are considered to be coincident and
written to the output file.

\item[Options]\leavevmode
\begin{entry}
\item[\texttt{--no-playground}] Optional.  Record all triggers that are
not in playground data.  The default behaviour returns only those triggers
which lie in the playground data set.  

\item[\texttt{--playground-only}] Optional.  Record only triggers that
occour in the playground times.  This is the default behaviour.

\item[\texttt{--ifo-a} \textsc{IFOA}] Required. This is the name of the
interfereometer to use as the interferometer A in the coincidence algorithm.
It must be a two letter IFO code e.g. \texttt{L1}, \texttt{H1}, etc.

\item[\texttt{--ifo-b} \textsc{IFOB}] Required. This is the name of the
interfereometer to use as the interferometer B in the coincidence algorithm.
It must be a two letter IFO code e.g. \texttt{L1}, \texttt{H1}, etc.

\item[\texttt{--epsilon} \textsc{$\epsilon$}] Optional. Set the value of
$\epsilon$ in the effective distance test. If not given the default of
$\epsilon = 2$ will be used.

\item[\texttt{--kappa} \textsc{$\kappa$}] Optional. Set the value of
$\kappa$ in the effective distance test. If not given the default of
$\kappa= 0.01$ will be used.

\item[\texttt{--dm} \textsc{$\delta m$}] Optional. Accept triggers as
coincident if both mass parameters agree within $\delta m$.  If not
supplied,  then $\delta m = 0$.

\item[\texttt{--dt} \textsc{$\delta t$}] Optional. Accept triggers as
coincident if their end times agree within $\delta t$ milliseconds.  If not
supplied,  then $\textsc{$\delta t$} = 0$.

\item[\texttt{--gps-start-time} \textsc{GPS seconds}] Required.  Look for
coincident triggers with end times after \textsc{GPS seconds}.

\item[\texttt{--gps-end-time} \textsc{GPS seconds}] Required.  Look for
coincident triggers with end times before \textsc{GPS seconds}.

\item[\texttt{--write-uniq-triggers}] Optional.  The default behaviour is to
only write all triggers from IFO A. However, a trigger from IFO A
may match two or more triggers from IFO B, so it may be duplicated in the 
output. Specifying this option causes only unique IFO A triggers to be
written.

\item[\texttt{--comment} \textsc{string}] Optional. Add \textsc{string} to the
comment field in the process table. If not specified, no comment is added. 

\item[\texttt{--user-tag} \textsc{string}] Optional. Set the user tag for this
job to be \textsc{string}. May also be specified on the command line as 
\texttt{-userTag} for LIGO database compatibility.

\item[\texttt{--help}] Optional.  Print a help message.
\end{entry}

\item[\texttt{--debug-level} \textsc{level}] Optional. Set the LAL debug
level to \textsc{level}. If not specified the default is 1.

\item[Arguments]\leavevmode
\begin{entry}
\item[\texttt{[LIGO Lightweight XML files]}] The arguments to the program
should be a list of LIGO Lightweight XML files containing the triggers from
the two interfereometers. The input files can be in any order and do not need
to be time ordered as \texttt{inca} will sort all the triggers once they are
read in. If the program encounters a LIGO Lightweight XML containing triggers
from an unknown interferometer (i.e. not IFO A or IFO B) it will exit with an
error.
\end{entry}

\item[Example]
\begin{verbatim}
lalapps_inca \
--playground-only  --gps-start-time 734357353 --drhominus 5.0 \
--dm 0.03 --gps-end-time 734358377 --ifo-b H1 --dt 20.0 \
--ifo-a L1 --drhoplus 5.0 --debug-level 33
\end{verbatim}

\item[Algorithm]
The code maintains two poniters to triggers from each ifo,
\texttt{currentTrigger[0]} and \texttt{currentTrigger[1]}, corresponding to
the current trigger from IFO A and B respectively.

\begin{enumerate}
\item An empty linked list of triggers from each interferometer is created.
Each input file is read in and the code determines which IFO the triggers in
the file correspond to. The triggers are appended to the linked list for the
corresponding interferometer.

\item If there are no triggers read in from either of the interferometers,
the code exits cleanly.

\item The triggers for each interferometer is sorted by the \texttt{end\_time}
of the trigger.

\item \texttt{currentTrigger[0]} is set to point to the first trigger from IFO
A that is after the specified GPS start time for coincidence. If no trigger is
found after the start time, the code exits cleanly.

\item Loop over each trigger from IFO A that occurs before the specified GPS
end time for coincidence:
\begin{enumerate}
\item \texttt{currentTrigger[1]} is set to point to the first trigger from IFO
B that is within the time coincidence window, $\delta t$, of
\texttt{currentTrigger[0]}. If no IFO B trigger exists within this window,
\texttt{currentTrigger[0]} is incremented to the next trigger from IFO A and
the loop over IFO A triggers restarts.

\item If the trigger \texttt{currentTrigger[0]} \emph{is, is not} in the
playground data, start looping over triggers from IFO B.
\begin{enumerate}
\item For each trigger from IFO B that is within $\delta t$ of
\texttt{currentTrigger[0]}
\item Call \texttt{LALCompareSnglInspiral()} to check if the triggers match as
determied by the options on the command line. If the trigger match, record
them for later output as coincident triggers.
\end{enumerate}

\item Increment \texttt{currentTrigger[0]} and continue loop over triggers
from IFO A.
\end{enumerate}
\end{enumerate}

\item[Author] 
Patrick Brady and Duncan Brown
\end{entry}

\clearpage
\subsection{Program \texttt{lalapps\_inspinj}}
\label{program:lalapps-inspinj}
\idx[Program]{lalapps\_inspinj}

\begin{entry}
\item[Name]
\verb$lalapps_inspinj$ --- produces inspiral injection data files.

\item[Synopsis]
\verb$lalapps_inspinj$ 
[\verb$--help$]
\verb$--source-file$ \textsc{sfile}
\verb$--mass-file$ \textsc{mfile}
\verb$--gps-start-time$ \textsc{tstart} 
\verb$--gps-end-time$ \textsc{tend} 
[\verb$--time-step$ \textsc{tstep}]
[\verb$--seed$ \textsc{seed}]
[\verb$--waveform$ \textsc{wave}]
[\verb$--usertag$ \textsc{tag}]
[\verb$--ilwd$]

\item[Description] 
\verb$lalapps_inspinj$
generates a number of inspiral  parameters suitable  for using in a Monte
Carlo injection to test the efficiency of a inspiral search.  The  various
parameters (detailed  below)  are randomly chosen and are appropriate for a
particular population of binary neutron stars  whose spatial  distribution
includes the Milky Way and a number of extragalactic objects that are  input
in  a  datafile.  The  possible  mass pairs for the binary neutron star com-
panions are also specified in a (different) datafile.

The output of this program  is  a  list  of  the  injected events,  starting
at  the specified start time, ending at the specified end time, and containing
one set  of  random inspiral parameters every specified time step.  The output
is written to a file name in the standard inspiral pipeline format:
\begin{center}
\begin{verbatim}
HL-INJECTIONS_USERTAG_SEED-GPSSTART-DURATION.xml
\end{verbatim}
\end{center}
where \verb$USERTAG$ is \textsc{tag} as specfied on the command line, 
\verb$SEED$ is the  value  of  the random number seed chosen and 
\verb$GPSSTART$ and \verb$DURATION$ describes the GPS time interval that
the file covers. The file is in the standarf LIGO lightweight XML format
containing a \texttt{sim\_inspiral} table that describes the injections.
In addition, an ascii log file called \verb$injlog.txt$ is also written.
If a \texttt{--user-tag} is not specified on the command line, the
\texttt{\_USERTAG} part of the filename will be omitted.

\item[Options]\leavevmode
\begin{entry}
\item[\texttt{--help}] Print a help message.

\item[\texttt{--source-file} \textsc{sfile}]
Optional. Data file containing spatial distribution of  extragalactic  objects.
Default  is  the file \verb+inspsrcs.dat+ provided by LALApps.

\item[\texttt{--mass-file} \textsc{mfile}]
Optional. Data file containing mass pairs  for  the binary  neutron  star
companions.   Default is the file \verb+BNSMasses.dat+ provided by LALApps.

\item[\texttt{--gps-start-time} \textsc{tstart}]
Optional.  Start time of the injection data to be created. Defaults to the
start of S2, Feb 14 2003 16:00:00 UTC (GPS time 729273613)

\item[\texttt{--gps-end-time} \textsc{tend}]
Optional. End time of the injection data to be created. Defaults to the end of
S2, Apr 14 2003 15:00:00 UTC (GPS time 734367613).

\item[\texttt{--time-step} \textsc{tstep}]
Optional. Sets the time step interval between injections. The injections will
occour at \textsc{tstep}$/\pi$ second intervals. Defaults to $2630/\pi$.

\item[\texttt{--seed} \textsc{seed}]
Optional. Seed the random number generator with the integer \textsc{seed}.
Defaults to $1$.

\item[\texttt{--waveform} \textsc{wave}]
Optional. The string \textsc{wave} will be written into the \texttt{waveform}
column of the \texttt{sim\_inspiral} table output. This is used by the
inspiral code to determine which type of waveforms it should inject into the
data. Defaults is \texttt{GeneratePPNtwoPN}.

\item[\texttt{--user-tag} \textsc{string}] Optional. Set the user tag for this
job to be \textsc{string}. May also be specified on the command line as 
\texttt{-userTag} for LIGO database compatibility.

\item[\texttt{--ilwd}] Optional. If this option is given,
\verb+lalapps_inspinj+ also produces two ILWD-format files, injepochs.ilwd and
injparams.ilwd, that contain, respectively, the  GPS  times  suitable for
inspiral injections, and the intrinsic inspiral signal parameters to be used
for  those injections.

The  file  injepochs.ilwd  contains  a sequence of integer pairs representing
the injection GPS time in  seconds  and residual  nano-seconds.   The file
injparams.ilwd contains the intrinsic binary parameters for each injection,
which is  a  sequence  of  eight  real  numbers representing (in order) (1) the
total mass of the binary system  (in  solar masses),  (2)  the  dimensionless
reduced mass --- reduced mass per unit total mass --- in the range from  0
(extreme mass  ratio)  to  0.25 (equal masses), (3) the distance to the system
in meters, (4) the inclination  of  the  binary system  orbit  to the plane of
the sky in radians, (5) the colaescence phase in radians, (6)  the  longitude
to  the direction  of  the  source in radians, (7) the latitude to the
direction of the source in radians, (8) and the polar- ization angle of the
source in radians.
\end{entry}

\item[Example]
\begin{verbatim}
lalapps_inspinj --seed 45\
--source-file inspsrcs.dat --mass-file BNSMasses.dat
\end{verbatim}

\item[Environment]\leavevmode
\begin{entry}
\item[LALAPPS\_DATA\_PATH] Directory to look for the default mass
file \verb+BNSMasses.dat+ and the default source file \verb+inspsrcs.dat+.
\end{entry}


\item[Author] 
Jolien Creighton, Patrick Brady, Duncan Brown
\end{entry}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% PROGRAM:   snglInspiralReader
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\clearpage
\subsection{Program \texttt{lalapps\_snglInspiralReader}}
\label{program:lalapps-snglInspiralReader}
\idx[Program]{lalapps\_snglInspiralReader}

\begin{entry}
\item[Name]
\verb$lalapps_snglInspiralReader$ --- manipulates LIGO lightweight XML
files of inspiral triggers allowing cuts and clustering.

\item[Synopsis]
\verb$lalapps_snglInspiralReader$ 
\verb$--input$ \textsc{infile} \verb$--table$ \textsc{tablename}
\newline 
\verb$--outfile$ \textsc{outfile}
[\verb$--snrstar$ \textsc{snrstar}] [\verb$--noplayground$] 
[\verb$--sort$] [\verb$--cluster$ \textsc{msec}] \newline
[\verb$--clusteralgorithm$ \textsc{clusterchoice}] [\verb$--help$]

\item[Description] 
\verb$lalapps_snglInspiralReader$ processes triggers from the inspiral
search code.   The \textsc{infile} should contain a list of the XML
files containing the triggers;  the format is one filename per line. 
The default behavior outputs triggers during playground
times to the file \textsc{outfile};  to obtain all triggers,  use the 
\verb$--noplayground$ flag.    To apply a cut on SNR,  use the flag 
\verb$--snrstar$ \textsc{snrstar}:  only triggers with $\texttt{SNR} 
> \textsc{snrstar}$ will be recorded.    Events can also be clustered
within \textsc{msec} msec,   in which case the \verb$--sort$ flag is
recommended unless you are certain that the triggers are time-ordered.  
There is a choice of several clustering algorithms, which can be selected
using \verb$--clusteralgorithm$.


\item[Options]\leavevmode
\begin{entry}
\item[\texttt{--input} \textsc{infile}] Required.  A file containing a
list of LIGO lightweight XML files with triggers to be processed.  The
format of \textsc{infile} is one file name per line.

\item[\texttt{--table} \textsc{tablename}] Required.  The name of the 
XML table containing the inspiral events, this will usually be 
\texttt{sngl\_inspiral}.

\item[\texttt{--outfile} \textsc{outfile}] Required.  Name of the file
to be used for output.  The output format is LIGO lightweight XML with
\texttt{sngl\_inspiral}, \texttt{process} and \texttt{process\_params}
tables. 

\item[\texttt{--snrstar} \textsc{snrstar}] Optional.  A threshold cut
on signal-to-noise.  Only triggers with $\textsc{snr} > \textsc{snrstar}$
are recorded in the output file.

\item[\texttt{--noplayground}] Optional.  Record all triggers.  The
default behaviour returns only those triggers which lie in the
playground data set.  

\item[\texttt{--sort}] Optional.   Sort the triggers in time (before
clustering).  

\item[\texttt{--cluster} \textsc{msec}] Optional.  Cluster triggers
within \textsc{msec} msec window.   The clustering algorithm
identifies the first trigger in a cluster, then displaces it if another 
trigger within the clustering window satisfies the appropriate condition 
(described below).

\item[\texttt{--clusteralgorithm} \textsc{choicenumber}]  Optional.  This
determines which condition will be used in clustering of the triggers.
The current choices are \texttt{snr\_and\_chisq} --- displace event if
its \textsc{snr} is exceeded by an event with a smaller
\textsc{chisq}; \texttt{snrsq\_over\_chisq} --- displace event if the
quantity $(\textsc{snr})^{2}/\textsc{chisq}$ is exceeded by a subsequent
event's.  The default is \texttt{snr\_and\_chisq}.

\item[\texttt{--help}] Optional.  Print a help message.
\end{entry}

\item[Example]
\begin{verbatim}
lalapps_snglInspiralReader --input xmlfilelist \
--table sngl_inspiral --outfile my.xml --snrstar 8.0 \
--sort --cluster 20 --clusteralgorithm snrsq_over_chisq
\end{verbatim}

\item[Author] 
Patrick Brady
\end{entry}
\clearpage



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% PROGRAM:   inspinj_find
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\clearpage
\subsection{Program \texttt{lalapps\_inspinj\_find}}
\label{program:lalapps-inspinj-find}
\idx[Program]{lalapps\_inspinj\_find}

\begin{entry}
\item[Name]
\verb$lalapps_inspinj_find$ --- compares LIGO lightweight XML files 
containing inspiral triggers with an XML file containing injected
signals and tests for time coincidence.


\item[Synopsis]
\verb$lalapps_inspinj_find$ 
\verb$--input$ \textsc{infile} [\verb$--inject$ \textsc{injectfile}]
\verb$--outfile$ \textsc{outfile} \newline
[\verb$--snrstar$ \textsc{snrstar}]
[\verb$--sort$] [\verb$--noplayground$] [\verb$--deltat$
\textsc{dt}] \newline
[\verb$--cluster$ \textsc{clust}] 
[\verb$--clusteralgorithm$ \textsc{clusterchoice}] 
[\verb$--missedinjections$ \textsc{missedfile}]\newline
[\verb$--hardware$ \textsc{starttime}] [\verb$--help$]\newline
 


\item[Description] 
\verb$lalapps_inspinj_find$ compares triggers from the inspiral
search code with injections.  The \textsc{infile} should contain a
list of the XML files containing the triggers; the format is one
filename per line.  The triggers can be sorted, using the
\verb$--sort$ flag.  To apply a cut on SNR,  use the flag  
\verb$--snrstar$ \textsc{snrstar}:  only triggers with $\texttt{SNR} 
> \textsc{snrstar}$ will be recorded.  If the file \textsc{injectfile}
containing injections is provided then the program will compare the
triggers with the injections, in which case the \verb$--sort$ flag is
recommended unless you are certain that the triggers are time-ordered.
Any trigger occuring within \textsc{dt} msec of an injection
is retained.  Additionally, any injection which is coincident with one
or more triggers is also retained.  The tables of triggers and
injections are output to the file \textsc{outfile}.  Events can also
be clustered within \textsc{clust} msec, after coincidence has
been checked.  If \textsc{clust} is twice \textsc{dt}
then only one trigger per inspiral will survive.  There is a choice of
several clustering algorithms, which can be selected using
\verb$--clusteralgorithm$.  Finally, specifying \verb$--missedinjections$,
creates a file \textsc{missedfile} containing a table of those
injections which occured during the times of the input files, and in
the playground, which were not coincident with any triggers.


\item[Options]\leavevmode
\begin{entry}
\item[\texttt{--input} \textsc{infile}] Required.  A file containing a
list of LIGO lightweight XML files with triggers to be processed.  The
format of \textsc{infile} is one file name per line.

\item[\texttt{--inject} \textsc{injectfile}] Optional.  A file
containing a list of inspiral events which were injected into the
data.  The \textsc{injectfile} format is LIGO lightweight XML with a
\texttt{sim\_inspiral} table. If this file is not specified, the
program runs in the same way as \texttt{lalapps\_snglInspiralReader}.

\item[\texttt{--outfile} \textsc{outfile}] Required.  Name of the file
to be used for output.  The output format is LIGO lightweight XML with
\texttt{sngl\_inspiral}, \texttt{sim\_inspiral}, \texttt{process} and 
\texttt{process\_params} tables.  

\item[\texttt{--snrstar} \textsc{snrstar}] Optional.  A threshold cut
on signal-to-noise.  Only triggers with $\textsc{snr} > \textsc{snrstar}$
are checked for coincidence with the injections.

\item[\texttt{--sort}] Optional.   Sort the triggers in time (before
checking coincidence).  

\item[\texttt{--noplayground}] Optional.  Record all triggers.  The
default behaviour returns only those triggers which lie in the
playground data set.  

\item[\texttt{--deltat} \textsc{dt}] Optional.  This gives the maximum time
difference \textsc{dt} allowed between the injection and trigger.  If
not specified, the default is 20msec.  

\item[\texttt{--cluster} \textsc{clust}] Optional.  Cluster triggers
within \textsc{clust} msec window.   The clustering algorithm
identifies the first trigger in a cluster, then displaces it if another 
trigger within the clustering window satisfies the appropriate condition 
(described below).

\item[\texttt{--clusteralgorithm} \textsc{choicenumber}]  Optional.  This
determines which condition will be used in clustering of the triggers.
The current choices are \texttt{snr\_and\_chisq} --- displace event if
its \textsc{snr} is exceeded by an event with a smaller
\textsc{chisq}; \texttt{snrsq\_over\_chisq} --- displace event if the
quantity $(\textsc{snr})^{2}/\textsc{chisq}$ is exceeded by a subsequent
event's.  The default is \texttt{snr\_and\_chisq}.

\item[\texttt{--missedinjections} \textsc{missedfile}]  Optional.
Output a \texttt{sim\_inspiral} table in \textsc{missedfile} containing
all injections which were not coincident with a trigger.  Only
injections occuring during during the times of the input files and
within the playground (unless \texttt{--noplayground} is specified)
are given.
 
\item[\texttt{--hardware} \textsc{starttime}]  Optional.  The
\textsc{starttime} should be the gps start time of the hardware
injections in seconds.  In this case, the \textsc{injectfile} is
expected to contain a list of the hardware injections, where the time
given is the time after the start of injections that the coalescence
occurs. 

\item[\texttt{--help}] Optional.  Print a help message.
\end{entry}

\item[Example]
\begin{verbatim}
lalapps_inspinj_find --input xmlfilelist \
--inject injections.xml --outfile my.xml --snrstar 8.0 \
--coincidence 20 --sort --cluster 20 --clusteralgorithm snrsq_over_chisq \
--missedinjections missedinj.xml
\end{verbatim}

\item[Author] 
Steve Fairhurst
\end{entry}
\clearpage


