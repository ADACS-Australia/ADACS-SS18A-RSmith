% $Id$

\chapter{Stochastic Search Programs}
\label{chapter:stochastic}

This section of \textsc{LALApps} contains programs that can be used to
search interferometer data for stochastic gravitational wave
backgrounds.

\clearpage
\input{olapredfcn}

\clearpage
\section{Program \prog{lalapps\_stochastic\_pipe}}
\label{program:lalapps-stochastic-pipe}
\idx[Program]{lalapps\_stochastic\_pipe}

\begin{entry}
\item[Name]
\prog{lalapps\_stochastic\_pipe} --- python script to generate Condor DAGs
to run the stochastic pipeline.

\item[Synopsis]
\begin{verbatim}
  -h, --help               display this message
  -v, --version            print version information and exit

  -d, --datafind           run LSCdataFind to create frame cache files
  -s, --stochastic         run lalapps_stochastic

  -P, --priority PRIO      run jobs with condor priority PRIO

  -f, --config-file FILE   use configuration file FILE
  -l, --log-path PATH      directory to write condor log file
\end{verbatim}

\item[Description] \prog{lalapps\_stochastic\_pipe} generates a Condor DAG
to run the stochastic search pipeline. The configuration should specify
the parameters needed to run the jobs and must be specified with the
\verb$--config-file$ option. A file containing science segments to
analysed should be specified in the \verb$[input]$ section of the
configuration file with a line such as

\begin{verbatim}
segments = S2H1L1v03_selectedsegs.txt
\end{verbatim}

This should contain four whitespace separated columns:

\begin{verbatim}
  segment_id    gps_start_time    gps_end_time    duration
\end{verbatim}

that define the science segments to be used. Lines starting with an
octothorpe are ignored.

\item[Example]
Generate a DAG to run a stochastic search on a pair of interferometers
specified in the configuration file. The generated DAG is then submitted
with \texttt{condor\_submit\_dag}

\begin{verbatim}
> lalapps_stochastic_pipe --log-path /home/ram/dag_logs \
     --datafind --stochastic --config-file stochastic_H1L1.ini
> condor_submit_dag stochastic_H1L1.dag
\end{verbatim}

\item[Author]
Adam Mercer
\end{entry}

\clearpage
\section{Program \prog{lalapps\_stochastic\_bayes}}
\label{program:lalapps-stochastic-bayes}
\idx[Program]{lalapps\_stochastic\_bayes}

\begin{entry}
\item[Name]
\prog{lalapps\_stochastic\_bayes} --- python script to generate Condor DAGs
to run the stochastic bayesian pipeline.

\item[Synopsis]
\begin{verbatim}
  -h, --help               display this message
  -v, --version            print version information and exit

  -d, --datafind           run LSCdataFind to create frame cache files
  -s, --stochastic         run lalapps_stochastic

  -P, --priority PRIO      run jobs with condor priority PRIO

  -f, --config-file FILE   use configuration file FILE
  -l, --log-path PATH      directory to write condor log file
\end{verbatim}

\item[Description] \prog{lalapps\_stochastic\_bayes} generates a Condor
DAG to run the stochastic search bayesian pipeline. The configuration
should specify the parameters needed to run the jobs and must be
specified with the \verb$--config-file$ option. A file containing
science segments to analysed should be specified in the \verb$[input]$
section of the configuration file with a line such as

\begin{verbatim}
segments = S2H1L1v03_selectedsegs.txt
\end{verbatim}

This should contain
four whitespace separated columns:

\begin{verbatim}
  segment_id    gps_start_time    gps_end_time    duration
\end{verbatim}

that define the science segments to be used. Lines starting with an
octothorpe are ignored.

\item[Example]
Generate a DAG to run a stochastic search on a pair of interferometers
specified in the configuration file. The generated DAG is then submitted
with \texttt{condor\_submit\_dag}

\begin{verbatim}
> lalapps_stochastic_bayes --log-path /home/ram/dag_logs \
    --datafind --stochastic --config-file stochastic_H1L1_bayes.ini
> condor_submit_dag stochastic_H1L1_bayes.dag
\end{verbatim}

\item[Author]
Adam Mercer
\end{entry}

\clearpage
\section{Program \prog{lalapps\_stochastic}}
\label{program:lalapps-stochastic}
\idx[Program]{lalapps\_stochastic}

\begin{entry}
\item[Name]
\prog{lalapps\_stochastic} --- standalone stochastic analysis code.

\item[Synopsis]
\prog{lalapps\_stochastic} \newline \hspace*{0.5in}
\option{--help} \newline \hspace*{0.5in}
\option{--version} \newline \hspace*{0.5in}
\option{--verbose} \newline \hspace*{0.5in}
\option{--debug-level} \parm{N} \newline \hspace*{0.5in}
\option{--gps-start-time} \parm{N} \newline \hspace*{0.5in}
\option{--gps-end-time} \parm{N} \newline \hspace*{0.5in}
\option{--interval-duration} \parm{N} \newline \hspace*{0.5in}
\option{--segment-duration} \parm{N} \newline \hspace*{0.5in}
\option{--sample-rate} \parm{N} \newline \hspace*{0.5in}
\option{--resample-rate} \parm{N} \newline \hspace*{0.5in}
\option{--f-min} \parm{N} \newline \hspace*{0.5in}
\option{--f-max} \parm{N} \newline \hspace*{0.5in}
\option{--ifo-one} \parm{IFO} \newline \hspace*{0.5in}
\option{--ifo-two} \parm{IFO} \newline \hspace*{0.5in}
\option{--channel-one} \parm{CHANNEL} \newline \hspace*{0.5in}
\option{--channel-two} \parm{CHANNEL} \newline \hspace*{0.5in}
\option{--frame-cache-one} \parm{FILE} \newline \hspace*{0.5in}
\option{--frame-cache-two} \parm{FILE} \newline \hspace*{0.5in}
\option{--calibration-cache-one} \parm{FILE} \newline \hspace*{0.5in}
\option{--calibration-cache-two} \parm{FILE} \newline \hspace*{0.5in}
\option{--calibration-offset} \parm{N} \newline \hspace*{0.5in}
\option{--apply-mask} \parm{N} \newline \hspace*{0.5in}
\option{--mask-bin} \parm{N} \newline \hspace*{0.5in}
\option{--overlap-hann} \newline \hspace*{0.5in}
\option{--hann-duration} \parm{N} \newline \hspace*{0.5in}
\option{--high-pass-filter} \newline \hspace*{0.5in}
\option{--hpf-frequency} \parm{N} \newline \hspace*{0.5in}
\option{--hpf-attenuation} \parm{N} \newline \hspace*{0.5in}
\option{--hpf-order} \parm{N} \newline \hspace*{0.5in}
\option{--recentre} \newline \hspace*{0.5in}
\option{--post-analysis} \newline \hspace*{0.5in}
\option{--middle-segment} \newline \hspace*{0.5in}
\option{--inject} \newline \hspace*{0.5in}
\option{--scale-factor} \parm{N} \newline \hspace*{0.5in}
\option{--seed} \parm{N} \newline \hspace*{0.5in}
\option{--trials} \parm{N} \newline \hspace*{0.5in}
\option{--output-dir} \parm{DIR} \newline \hspace*{0.5in}
\option{--test} \newline \hspace*{0.5in}
\option{--test-interval} \parm{N} \newline \hspace*{0.5in}
\option{--test-segment} \parm{N} \newline \hspace*{0.5in}
\option{--test-trial} \parm{N} \newline \hspace*{0.5in}
\option{--geo-hpf-frequency} \parm{N} \newline \hspace*{0.5in}
\option{--geo-hpf-attenuation} \parm{N} \newline \hspace*{0.5in}
\option{--geo-hpf-order} \parm{N}

\item[Description] \prog{lalapps\_stochastic} runs the standalone
stochastic analysis code.

\item[Options]\leavevmode
\begin{entry}
\item[\option{--help}]
Display usage information
\item[\option{--version}]
Display version information
\item[\option{--verbose}]
Run in verbose mode, code display set by set progress information
\item[\option{--debug-level} \parm{N}]
Sets the LAL Debug Level to \parm{N}
\item[\option{--gps-start-time} \parm{N}]
Sets the GPS time from which data should be read to \parm{N}
\item[\option{--gps-end-time} \parm{N}]
Sets the GPS time to which data should be read to \parm{N}
\item[\option{--interval-duration} \parm{N}]
Sets the interval duration to \parm{N}
\item[\option{--segment-duration} \parm{N}]
Sets the segment duration to \parm{N}
\item[\option{--sample-rate} \parm{N}]
Sets the sample rate of the input data to \parm{N}
\item[\option{--resample-rate} \parm{N}]
Sets the resample rate to \parm{N}
\item[\option{--f-min} \parm{N}]
Sets the minimum frequency of the search band to \parm{N}
\item[\option{--f-max} \parm{N}]
Sets the maximum frequency of the search band to \parm{N}
\item[\option{--ifo-one} \parm{IFO}]
Sets the IFO for the first stream to be \parm{IFO}, currently supported
IFO's are H1, H2, L1 and G1
\item[\option{--ifo-two} \parm{IFO}]
Sets the IFO for the second stream to be \parm{IFO}, currently supported
IFO's are H1, H2, L1 and G1
\item[\option{--channel-one} \parm{CHANNEL}]
Sets the channel for the first stream to be \parm{CHANNEL}
\item[\option{--channel-two} \parm{CHANNEL}]
Sets the channel for the second stream to be \parm{CHANNEL}
\item[\option{--frame-cache-one} \parm{FILE}]
Sets the frame cache file for the first stream to be \parm{FILE}
\item[\option{--frame-cache-two} \parm{FILE}]
Sets the frame cache file for the second stream to be \parm{FILE}
\item[\option{--calibration-cache-one} \parm{FILE}]
Sets the calibration cache file for the first stream to be \parm{FILE}
\item[\option{--calibration-cache-two} \parm{FILE}]
Sets the calibration cache file for the second stream to be \parm{FILE}
\item[\option{--calibration-offset} \parm{N}]
Sets the calibration offset to \parm{N}
\item[\option{--apply-mask}]
Apply frequency masking
\item[\option{--mask-bin} \parm{N}]
Set the number of bins to mask per frequency to \parm{N}
\item[\option{--overlap-hann}]
Use overlapping Hann windows for data segments
\item[\option{--hann-duration} \parm{N}]
Set the Hann duration of the data segment window to \parm{N}, 0 for
Rectangular windowing, 1 for Tukey windowing and 60 for Hann windowing
\item[\option{--high-pass-filter}]
Apply a high pass filter to the input data
\item[\option{--hpf-frequency} \parm{N}]
Set the knee frequency of the high pass filter to \parm{N}
\item[\option{--hpf-attenuation} \parm{N}]
Set the attenuation coefficent for the high pass filter to \parm{N}
\item[\option{--hpf-order} \parm{N}]
Sets the high pass filter order to \parm{N}
\item[\option{--recentre}]
Centre the data
\item[\option{--post-analysis}]
Perform post analysis
\item[\option{--middle-segment}]
Include the middle segment in the power spectra estimation
\item[\option{--inject}]
Perform signal injection
\item[\option{--scale-factor} \parm{N}]
Set the scale factor for injections to \parm{N}
\item[\option{--seed} \parm{N}]
Set the random seed for injections to \parm{N}
\item[\option{--trials} \parm{N}]
Set the number of trials for injections to \parm{N}
\item[\option{--output-dir} \parm{DIR}]
Set the output directory for search results to \parm{DIR}
\item[\option{--test}]
Save out intermediate products
\item[\option{--test-interval} \parm{N}]
Save out interval \parm{N}
\item[\option{--test-segment} \parm{N}]
Save out segment \parm{N}
\item[\option{--test-trial} \parm{N}]
Save out trial \parm{N}
\item[\option{--geo-hpf-frequency} \parm{N}]
Set the knee frequency for the GEO high pass filter to \parm{N}
\item[\option{--geo-hpf-attenuation} \parm{N}]
Set the attenuation coefficient for the GEO high pass filter to \parm{N}
\item[\option{--geo-hpf-order} \parm{N}]
Set the GEO high pass filter order to \parm{N}
\end{entry}

\item[Author] 
Adam Mercer, Tania Regimbau
\end{entry}

\clearpage
\section{Program \prog{lalapps\_stopp}}
\label{program:lalapps-stopp}
\idx[Program]{lalapps\_stopp}

\begin{entry}
\item[Name]
\prog{lalapps\_stopp} --- Stochastic Post Processing.

\item[Synopsis]
\prog{lalapps\_stopp} \parm{options} \parm{xml files}\newline \hspace*{0.5in}
\option{--help} \newline \hspace*{0.5in}
\option{--version} \newline \hspace*{0.5in}
\option{--text} \newline \hspace*{0.5in}
\option{--output} \parm{FILE}

\item[Description] \prog{lalapps\_stopp}

\item[Options]\leavevmode
\begin{entry}
\item[\option{--help}]
Display usage information
\item[\option{--version}]
Display version information
\item[\option{--text}]
Output file as text
\item[\option{--output} \parm{FILE}]
write output data to \parm{FILE}
\end{entry}

\item[Example]

\item[Author]
Adam Mercer
\end{entry}
