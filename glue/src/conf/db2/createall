#! /bin/sh
dbname=${1}
db2 connect to ${1}
db2 update database configuration for ${1} using logsecond 100
db2 update database configuration for ${1} using locktimeout -1
db2 update database configuration for ${1} using locklist 400

echo Executing process.sql...
db2 -tf process.sql || exit
echo Executing process_params.sql...
db2 -tf process_params.sql || exit
echo Executing lfn.sql...
db2 -tf lfn.sql || exit
echo Executing gridcert.sql...
db2 -tf gridcert.sql || exit
echo Executing filter.sql...
db2 -tf filter.sql || exit
echo Executing filter_params.sql...
db2 -tf filter_params.sql || exit

echo Executing sim_type.sql...
db2 -tf sim_type.sql || exit
echo Executing sim_type_params.sql...
db2 -tf sim_type_params.sql || exit
echo Executing sim_inst.sql...
db2 -tf sim_inst.sql || exit
echo Executing sim_inst_params.sql...
db2 -tf sim_inst_params.sql || exit

echo Executing frameset_chanlist.sql...
db2 -tf frameset_chanlist.sql || exit
echo Executing frameset_writer.sql...
db2 -tf frameset_writer.sql || exit
echo Executing frameset.sql...
db2 -tf frameset.sql || exit
echo Executing frameset_loc.sql...
db2 -tf frameset_loc.sql || exit
echo Executing segment_definer.sql...
db2 -tf segment_definer.sql || exit
echo Executing segment.sql...
db2 -tf segment.sql || exit
echo Executing segment_def_map.sql...
db2 -tf segment_def_map.sql || exit
echo Executing segment_lfn_map.sql...
db2 -tf segment_lfn_map.sql || exit
echo Executing state_segment.sql || exit
db2 -td# -vf state_segment.sql

echo Executing summ_value.sql...
db2 -tf summ_value.sql || exit
echo Executing summ_statistics.sql...
db2 -tf summ_statistics.sql || exit
echo Executing summ_spectrum.sql...
db2 -tf summ_spectrum.sql || exit
echo Executing summ_csd.sql...
db2 -tf summ_csd.sql || exit
echo Executing summ_comment.sql...
db2 -tf summ_comment.sql || exit
echo Executing summ_mime.sql...
db2 -tf summ_mime.sql || exit

echo Executing gds_trigger.sql...
db2 -tf gds_trigger.sql || exit
echo Executing sngl_inspiral.sql...
db2 -tf sngl_inspiral.sql || exit
echo Executing sngl_burst.sql...
db2 -tf sngl_burst.sql || exit
echo Executing sngl_block.sql...
db2 -tf sngl_block.sql || exit
echo Executing sngl_ringdown.sql...
db2 -tf sngl_ringdown.sql || exit
echo Executing sngl_unmodeled.sql...
db2 -tf sngl_unmodeled.sql || exit
echo Executing sngl_dperiodic.sql...
db2 -tf sngl_dperiodic.sql || exit
echo Executing sngl_datasource.sql...
db2 -tf sngl_datasource.sql || exit
echo Executing sngl_transdata.sql...
db2 -tf sngl_transdata.sql || exit
echo Executing sngl_mime.sql...
db2 -tf sngl_mime.sql || exit
echo Executing sngl_unmodeled_v.sql...
db2 -tf sngl_unmodeled_v.sql || exit
echo Executing waveburst.sql...
db2 -tf waveburst.sql || exit
echo Executing waveburst_mime.sql...
db2 -tf waveburst_mime.sql || exit

echo Executing multi_inspiral.sql...
db2 -tf multi_inspiral.sql || exit
echo Executing multi_burst.sql...
db2 -tf multi_burst.sql || exit
echo Executing coinc_sngl.sql...
db2 -tf coinc_sngl.sql || exit

echo Executing exttrig_search.sql...
db2 -tf exttrig_search.sql || exit
echo Executing runlist.sql...
db2 -tf runlist.sql || exit
echo Executing search_summary.sql...
db2 -tf search_summary.sql || exit
echo Executing search_summvars.sql...
db2 -tf search_summvars.sql || exit
echo Executing calib_info.sql...
db2 -tf calib_info.sql || exit

db2 terminate
exit 0

echo Executing gds_trigger_tr_del.sql...
db2 -f gds_trigger_tr_del.sql || exit
echo Executing sngl_dperiodic_tr_del.sql...
db2 -f sngl_dperiodic_tr_del.sql || exit
echo Executing sngl_ringdown_tr_del.sql...
db2 -f sngl_ringdown_tr_del.sql || exit
echo Executing sngl_burst_tr_del.sql...
db2 -f sngl_burst_tr_del.sql || exit
echo Executing sngl_inspiral_tr_del.sql...
db2 -f sngl_inspiral_tr_del.sql || exit
echo Executing sngl_unmodeled_tr_del.sql...
db2 -f sngl_unmodeled_tr_del.sql || exit
db2 -tf grant.sql
db2 terminate
