#!/usr/bin/python

import sys
import os
from optparse import *
import re
import exceptions
import glob
from types import *

from pylab import *
from pylal import frgetvect

##############################################################################
usage = """usage: %prog [options] file1 (file2 file3)

Basic frame reading example.

  At present,  it only takes the name of a channel and frame files
  looping over them and extracting some basic information about the
  data and printing it to the screen.

"""
parser = OptionParser( usage )
parser.add_option("-v","--version",action="store_true",default=False,\
    help="display version information " )
    
parser.add_option("-c","--channel-name",action="store",type="string",\
    default=None, metavar=" CHANNEL",\
    help="The channel to read from the frame files" ) 

(opts,args) = parser.parse_args()

# if --version flagged
if opts.version:
  sys.exit(0)

# check at least one trig file was specified
if not args:
  print >>sys.stderr, "Error: a frame file must be specified"
  print >>sys.stderr, "Enter 'plotchannel --help' for usage"
  sys.exit(1)

# check at least one trig file was specified
if not opts.channel_name:
  print >>sys.stderr, "Error: a channel name must be specified"
  print >>sys.stderr, "Enter 'plotchannel --help' for usage"
  sys.exit(1)

channel = opts.channel_name
injFiles = args        

for i in range(len(injFiles)):
  output = frgetvect.frgetvect(injFiles[i],channel)
  print "len(output[0]) = %d" % len(output[0])
  print "len(output[1]) = %d" % len(output[1])
  print "len(output[2]) = %d" % len(output[2])
  print "output[3:] = " + str(output[3:])
