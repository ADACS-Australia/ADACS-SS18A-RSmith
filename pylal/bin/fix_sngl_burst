#!/bin/bash

#
# Convert a LIGO LW file containing sngl_burst tables as generated by LAL
# to a format compatible with the official LSC table definition.  This
# means: renaming the peak_dof column to tfvolume, deleting the clusterT
# column, and removing and then adding (valid) event_ids.  Reads input from
# stdin, writes output to stdout.
#

sed -e "s?sngl_burstgroup:sngl_burst:peak_dof?sngl_burstgroup:sngl_burst:tfvolume?" |
ligolw_cut --delete-element Comment --delete-column "sngl_burst:clusterT" --delete-column "sngl_burst:event_id" |
./fix_sngl_burst_add_event_id
