EXTRA_DIST = \
	ax_pthread.m4 \
	config.guess \
	config.sub \
	cuda.common \
	depcomp \
	doc.mk \
	dvi.mk \
	include.mk \
	install-sh \
	lal.m4 \
	lalsuite_build.m4 \
	lalsuite_c99.m4 \
	lalsuite_gccflags.m4 \
	libtool.m4 \
	ltmain.sh \
	ltoptions.m4 \
	ltsugar.m4 \
	ltversion.m4 \
	lt~obsolete.m4 \
	main.tex.in \
	missing \
	mkinstalldirs \
	generate_user_env.awk

CLEANFILES = \
	lal-user-env.shell \
	lal-user-env.sh \
	lal-user-env.csh

sysconf_DATA = \
	lal-user-env.sh \
	lal-user-env.csh

BUILT_SOURCES = \
	lal-user-env.sh \
	lal-user-env.csh

all-local: include-link

lal-user-env.shell: Makefile $(srcdir)/generate_user_env.awk
	@echo "# generic user environment script" >$@
	@echo "set LAL_PREFIX $(prefix)" >>$@
	@echo "prepend PATH $(bindir)" >>$@
	@echo "prepend MANPATH $(mandir)" >>$@
	@echo "prepend LD_LIBRARY_PATH $(libdir)" >>$@
	@echo "prepend PKG_CONFIG_PATH $(libdir)/pkgconfig" >>$@
	@echo "prepend LAL_DATA_PATH $(pkgdatadir)" >>$@
	@echo "$(SWIG_USER_ENV)" | $(SED) 's|~E~O~L~|\n|g' >>$@

lal-user-env.csh lal-user-env.sh: lal-user-env.shell $(srcdir)/generate_user_env.awk
	@echo "creating $@"
	@$(AWK) -f $(srcdir)/generate_user_env.awk -v SED=$(SED) -v package=$(PACKAGE_NAME) -v output=$@ $< || { rm -f $@; exit 1; }

@INCLUDEMKFILE@
